@{
    ViewData["Title"] = "Index";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

@using System.Security.Claims

<div class="jumbotron">
    <h1>Newsletter</h1>
</div>

<hr />
@if (User.Identity.IsAuthenticated)
{

    <p>Hello Admin @User.Identity.Name!</p>
    @using (Html.BeginForm("LogOff", "Account"))
    {
        <input type="submit" class="btn btn-default" value="Log Out" />

    }
        <h2>Mailing List</h2>
        <ul>
        @foreach(var user in ViewBag.MailingList)
        {
            <li>user.Name | user.Email</li>

        }
        </ul>
}
else
{
    <h2>Welcome To Our Newsletter Signup! Here you will be able to sign up for the company newsletter</h2>

    @using (Html.BeginForm())
    {
        <h3>Mailing List Info</h3>
        <h4>Name</h4>
        @Html.TextBox("Name")
        <h4>Email</h4>
        @Html.TextBox("Email")

        <input type="submit" value="Mailing List Sign Up" />
    }
}